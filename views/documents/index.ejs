<% include ../head.ejs %>
<% include ./sidebar.ejs %>

<div class="sidebar-push">
    <div class="container">

        <% if(locals.signedInUser && locals.signedInUser.isAdmin){ %>
        <div class="tile pad">
            <h4>Admin</h4>
            <div class="form-group">
                <a href="/docs/new" class="button primary">New</a>
            </div>
        </div>
        <% } %>

        <h2 class="center">Documents</h2>

        <% subjects.map(function(subject){ %>

        <div class="dragg">
            <div class="draggInner">
                <h3>
                    <%- subject.name %>
                </h3>

                <% subject.documents.map(function(document){ %>
                <div class="dragg">
                    <div class="draggInner">
                        <li><a href="/docs/item/<%- document.id %>"><%- document.title %></a></li>
                    </div>
                </div>
                <% }); %>

                <% subject.subjects.map(function(subSubject){ %>
                <div class="dragg">
                    <div class="draggInner">
                        <h4><a href="/docs/<%- subSubject.id %>"><%- subSubject.name %></a></h4>

                        <% subSubject.documents.map(function(document){ %>
                        <div class="dragg">
                            <div class="draggInner">
                                <li><a href="/docs/item/<%- document.id %>"><%- document.title %></a></li>
                            </div>
                        </div>
                        <% }); %>
                    </div>
                </div>
                <% }); %>
                <br>
                <% }); %>
            </div>
        </div>
    </div>
</div>

<link href="/components/dragula.js/dist/dragula.min.css" rel="stylesheet">
<script src="/components/dragula.js/dist/dragula.min.js"></script>
<script>
    var drake = dragula({
        isContainer: function isContainer(el) {
            return el.classList.contains('dragg');
        }
    });
</script>

<% include ../foot.ejs %>